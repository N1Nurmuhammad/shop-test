import datetimeimport timeimport requestsfrom decouple import configfrom django.db.models import Sum, Countfrom apps.shop.models import EmployeeModelfrom core.celery import app@app.taskdef send_statistics():    today = datetime.datetime.today()    year = today.year    month = today.month    filter_kwargs = {"date__year": year, "date__month": month}    employees = EmployeeModel.objects.all()    for employee in employees:        filtered_orders = employee.orders.filter(**filter_kwargs)        text = f'ID: {employee.id}\n' \               f'Full Name: {employee.full_name}\n' \               f'Unique Clients: {filtered_orders.distinct("client").count()}\n' \               f'Clients: {filtered_orders.count()}\n' \               f'Products: {filtered_orders.annotate(products_count=Count("products")).aggregate(products_sum=Sum("products_count"))["products_sum"]}\n' \               f'Summa: {filtered_orders.aggregate(order_price_sum=Sum("price"))["order_price_sum"]}\n'        requests.get(            f'https://api.telegram.org/bot{config("BOT_TOKEN")}/sendMessage?chat_id={config("STAT_CHANNEL")}&text={text}'        )        time.sleep(1)    return True