from django.db import modelsfrom django.db.models import Sumfrom django.db.models.signals import post_savefrom django.dispatch import receiverfrom apps.shop.models import ClientModel, ProductModel, EmployeeModelclass OrderModel(models.Model):    client = models.ForeignKey(ClientModel, null=True, on_delete=models.SET_NULL, related_name="orders")    products = models.ManyToManyField(ProductModel, related_name="orders")    employee = models.ForeignKey(EmployeeModel, on_delete=models.SET_NULL, null=True, related_name="orders")    price = models.PositiveIntegerField(default=0)    date = models.DateField(auto_now_add=True)    def __str__(self):        return f"{self.client} {self.price}"@receiver(post_save, sender=OrderModel)def add_price(sender, instance: OrderModel = None, created=False, **kwargs):    if created and instance.price == 0:        instance.price = instance.products.aggregate(summa=Sum("price")).get("summa", 0)